class Counter{constructor(t,e){this.buttons=t,this.amount=e}changeAmount=()=>{this.buttons[0].onclick=this.decreaseAmount,this.buttons[1].onclick=this.increaseAmount};increaseAmount=()=>{this.amount.innerText++,+this.amount.innerText>1&&this.buttons[0].classList.contains("counter__button--disabled")&&this.buttons[0].classList.remove("counter__button--disabled")};decreaseAmount=()=>{+this.amount.innerText>1&&this.amount.innerText--,1==+this.amount.innerText&&this.buttons[0].classList.add("counter__button--disabled")}}document.addEventListener("DOMContentLoaded",(()=>{const t=[...document.querySelectorAll(".counter__button")],e=document.querySelector(".counter__amount");new Counter(t,e).changeAmount()}));const footerYear=document.querySelector(".footer__year"),getedYear=()=>footerYear.textContent=`${(new Date).getFullYear()}`;console.log(footerYear.textContent=`${(new Date).getFullYear()}`);class Mail{constructor(t,e,i,s){this.btn=t,this.name=e,this.amount=i,this.phone=s}"сontactData"=()=>({name:{value:this.name.value,item:this.name,re:/^[a-zA-Zа-яА-Я0-9]{2,16}$/},phone:{value:this.phone.value,item:this.phone,re:/^[78]{1}[9]{1}[0-9]{9}$/},amount:{value:+this.amount.textContent,item:this.amount,re:/^[1-9]{0,3}$/}});contactDataArray=()=>Object.entries(this.сontactData());sendMail(t){this.btn.addEventListener("click",(t=>{this.mailValidation(t)})),document.addEventListener("keydown",(t=>{"Enter"===t.code&&this.mailValidation(t)}))}mailValidation(t){if(t.preventDefault(),this.validateData()){console.log("ok"),this.contactDataArray().map((t=>t[1].item.nextElementSibling.classList.contains("contact__invalid--show")&&t[1].item.nextElementSibling.classList.remove("contact__invalid--show")));let t={name:this.name.value,phone:this.phone.value,amount:+this.amount.textContent};this.makeRequest(this,t)}}makeRequest=(t,e)=>{let i=new XMLHttpRequest;i.open("POST","/"),i.setRequestHeader("content-type","application/json"),i.onload=function(){if("success"===i.responseText){document.querySelector(".order").classList.add("modal--active"),t.removeFields()}else console.log("some")},i.send(JSON.stringify(e))};removeFields=()=>this.contactDataArray().map(((t,e)=>t[1].item.value=""));validateData=()=>this.contactDataArray().every(((t,e)=>!!t[1].re.test(t[1].value)||this.setAlert(t[1].item)))&&!0;setAlert(t){t.nextElementSibling.classList.add("contact__invalid--show"),setTimeout((()=>{t.nextElementSibling.classList.remove("contact__invalid--show")}),1e4)}}document.addEventListener("DOMContentLoaded",(()=>{const t=document.querySelector(".contact__button"),e=document.getElementById("name"),i=document.querySelector(".counter__amount"),s=document.getElementById("phone");new Mail(t,e,i,s).sendMail()}));class Sidebar{constructor(t,e,i,s,n,o,a,r){this.page=t,this.sections=e,this.menuItems=i,this.mobileMenuItems=s,this.index=0,this.sidebar=o,this.hamburgerMenu=n,this.sidebarBody=a,this.sidebarOverlay=r}sidebarManipulation=()=>{console.log("ok"),window.onresize=()=>{window.innerWidth>1024&&this.sidebar.classList.contains("page__sidebar--active")&&this.removeSidebar()},this.sidebarOverlay.onclick=()=>this.removeSidebar(),this.hamburgerMenu.onclick=t=>this.toggleSidebar(),this.mobileMenuItems.map((t=>t.onclick=()=>this.removeSidebar()))};toggleSidebar=()=>{console.log("ok"),this.sidebar.classList.toggle("page__sidebar--active"),this.page.classList.toggle("page__noScroll"),this.sidebarBody.classList.toggle("sidebar__body--active"),this.sidebarOverlay.classList.toggle("overlay--show"),this.hamburgerMenu.classList.toggle("hamburger-menu__content--active")};removeSidebar=()=>{this.sidebar.classList.remove("page__sidebar--active"),this.page.classList.remove("page__noScroll"),this.sidebarBody.classList.remove("sidebar__body--active"),this.sidebarOverlay.classList.remove("overlay--show"),this.hamburgerMenu.classList.remove("hamburger-menu__content--active")};menuItemsInit=()=>{this.menuItems.map(((t,e)=>t.onclick=()=>{this.changeItemStyle(e)}))};changeItemStyle=t=>{console.log("object");document.querySelector(".menu__items--active").classList.remove("menu__items--active"),this.menuItems[t].classList.add("menu__items--active")};scrollEvent=()=>{window.addEventListener("scroll",(()=>{this.setActiveUrl()}))};setActiveUrl=()=>{this.sectionTop(1)-150<window.scrollY&&(this.setNewUrl(this.index+1),this.changeItemStyle(this.index+1),this.index++),this.sectionTop(0)-150>window.scrollY&&(this.setNewUrl(this.index-1),this.changeItemStyle(this.index-1),this.index--)};findActiveIndex=()=>{for(let t=0;t<this.sections.length;t++)this.sections[t].getBoundingClientRect().top+window.pageYOffset<window.scrollY&&(this.index=t,console.log(this.sections[t].getBoundingClientRect().top+window.pageYOffset),this.changeItemStyle(this.index),this.setNewUrl(this.index))};setNewUrl=t=>{console.log(t);const e=`#${this.sections[t].id}`,i=`#${this.sections[t].id}`;history.replaceState(e,"scroll",i)};sectionTop=t=>this.sections[this.index+t].getBoundingClientRect().top+window.pageYOffset}document.addEventListener("DOMContentLoaded",(()=>{const t=document.querySelector(".page"),e=[...document.querySelectorAll(".section")],i=[...document.querySelectorAll(".menu__items")],s=[...document.querySelectorAll(".mobile-menu__item")],n=document.querySelector(".page__sidebar"),o=document.querySelector(".sidebar__body"),a=document.querySelector(".overlay"),r=document.querySelector(".hamburger-menu__content"),l=new Sidebar(t,e,i,s,r,n,o,a);l.findActiveIndex(),l.scrollEvent(),l.menuItemsInit(),l.sidebarManipulation()}));class Slider{constructor(t,e,i,s){this.arrow=t,this.content=e,this.sliderImg=i,this.main=s,this.isDragging=!1,this.settings={carousel:{classes:[],touchEvent:!0,slideAmounts:null},fade:{classes:[],touschEvent:!1,slideAmounts:1}},this.currentIndex=0,this.startPos=0,this.currentTranslation=0,this.prevTranslation=0,this.animationID=0}resizeWindow=()=>{window.onresize=t=>{console.log(window.getComputedStyle(this.main)),this.getTransformation(t)}};contextMenu=()=>{window.oncontextmenu=t=>(t.preventDefault(),t.stopPropagation(),!1)};initDrag=()=>{this.content.map(((t,e)=>{t.addEventListener("dragstart",(t=>t.preventDefault())),t.addEventListener("touchstart",this.touchStart(e),{passive:!0}),t.addEventListener("touchend",(t=>this.touchEnd(t))),t.addEventListener("touchmove",this.touchMove,{passive:!0}),t.addEventListener("mousedown",this.touchStart(e),{passive:!0}),t.addEventListener("mouseup",(t=>this.touchEnd(t))),t.addEventListener("mousemove",this.touchMove,{passive:!0}),console.log("ok"),console.log(this),t.addEventListener("mouseleave",(t=>this.isDragging&&this.touchEnd(t)))}))};touchStart=t=>e=>{this.content[t].classList.add("carousel__item--dragable"),this.main.classList.remove("carousel__wrapper--smooth"),this.sliderImg[t].classList.remove("carousel__img--zoom-out"),this.currentIndex=t,this.startPos=this.getPositionX(e),this.isDragging=!0,this.animationID=requestAnimationFrame(this.animation)};touchEnd=t=>{cancelAnimationFrame(this.animationID),this.isDragging=!1,this.content[this.currentIndex].classList.remove("carousel__item--dragable"),this.sliderImg[this.currentIndex].classList.add("carousel__img--zoom-out"),this.main.classList.add("carousel__wrapper--smooth");const e=document.querySelector(".carousel__item--active");this.currentTranslation<=0&&e.nextElementSibling&&Math.abs(this.currentTranslation)>Math.abs(this.prevTranslation)+e.clientWidth/4.5?this.toggleAciveElement(e,e.nextElementSibling):this.currentTranslation<=0&&e.previousElementSibling&&Math.abs(this.currentTranslation)<Math.abs(this.prevTranslation)-e.clientWidth/4.5&&this.toggleAciveElement(e,e.previousElementSibling),this.getTransformation(t)};touchMove=t=>{if(this.isDragging){const e=this.getPositionX(t);this.currentTranslation<=0&&this.currentTranslation>=this.content[0].clientWidth*(this.content.length-1)*-1&&(this.currentTranslation=this.prevTranslation+e-this.startPos)}};animation=()=>{console.log(this.isDragging),this.isDragging&&(this.setSliderPosition(),requestAnimationFrame(this.animation))};setSliderPosition=()=>{console.log(this.main),this.main.style.transform=`translateX(${this.currentTranslation}px)`};getPositionX=t=>t.type.includes("mouse")?t.pageX:t.touches[0].clientX;getToggleBtns=()=>{this.arrow[0].addEventListener("click",(t=>{this.left(t)})),this.arrow[1].addEventListener("click",(t=>{this.rigth(t)}))};rigth=t=>{const e=document.querySelector(".carousel__item--active");e.nextElementSibling?(this.toggleAciveElement(e,e.nextElementSibling),this.getTransformation(t)):(this.toggleAciveElement(e,this.content[0]),this.getTransformation(t))};left=t=>{const e=document.querySelector(".carousel__item--active");e.previousElementSibling?(this.toggleAciveElement(e,e.previousElementSibling),this.getTransformation(t)):(this.toggleAciveElement(e,this.main.lastElementChild),this.getTransformation(t))};toggleAciveElement=(t,e)=>{t.classList.remove("carousel__item--active"),e.classList.add("carousel__item--active")};activeSlide=()=>document.querySelector(".carousel__item--active");getTransformation=t=>{const e=document.querySelector(".carousel__item--active");this.currentIndex=this.content.indexOf(e),this.prevTranslation=this.currentIndex*-e.clientWidth,this.currentTranslation=-this.currentIndex*e.clientWidth,t&&console.log("ok"),console.log(this.main),this.main.style.transform=t?`translate(-${this.currentIndex}00%)`:`translate(${this.currentTranslation}px)`}}class SliderVisibilty extends Slider{constructor(t,e,i,s,n){super(),this.galleryImg=t,this.content=e,this.sliderImg=i,this.page=s,this.modal=n}initGalleryImg=()=>{this.galleryImg.map((t=>t.onclick=e=>this.showSlider(e,t)))};initCloseBtn=()=>{this.modal.map((t=>t.onclick=e=>{console.log(e),this.hideSlider(e,t)}))};showSlider=(t,e)=>{console.log(this),this.modal[0].classList.add("modal--active"),this.sliderImg[this.galleryImg.indexOf(e)].classList.add("carousel__img--zoom-out"),this.page.classList.add("page--no-scroll");const i=document.querySelector(".carousel__item--active");this.toggleAciveElement(i,this.content[this.galleryImg.indexOf(e)])};hideSlider=(t,e)=>{(this.startPos===t.clientX&&t.target.classList.contains("carousel__img")||t.target.classList.contains("button__close"))&&(e.classList.remove("modal--active"),this.page.classList.contains("page--no-scroll")&&this.page.classList.remove("page--no-scroll"))}}document.addEventListener("DOMContentLoaded",(()=>{const t=[...document.querySelectorAll(".carousel__toggler")],e=[...document.querySelectorAll(".carousel__item")],i=[...document.querySelectorAll(".carousel__img")],s=[...document.querySelectorAll(".gallery__img")],n=document.querySelector(".page"),o=[...document.querySelectorAll(".modal")],a=document.querySelector(".carousel__wrapper"),r=new Slider(t,e,i,a),l=new SliderVisibilty(s,e,i,n,o);r.getToggleBtns(),r.initDrag(),l.initGalleryImg(),l.initCloseBtn()}));